webpackJsonp([44],{"8PMp":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("iDcQ"),c=o("g3lQ"),a=o("m9rU"),i=o("pBwn"),s={name:"xgMobile",data:function(){return{isSend:!0,codeInfo:"获取验证码",isLoading:!1,code:"",mobile:"",codeback:"",accessToken:"",activeNum:""}},created:function(){this.accessToken=this.$cookie.get("accessToken"),this.activeNum=Object(i.b)("activeNum"),console.log(this.accessToken)},methods:{onRefresh:function(){var e=this;setTimeout(function(){e.$toast("刷新成功"),e.isLoading=!1,e.count++},500)},getCode:function(){var e=this;n.a.test(this.mobile)&&this.isSend?Object(c.a)("/account/sms",{cellphone:this.mobile,type:4}).then(function(t){if(console.log(t),200==t.status){if(e.codeback=t.data.data.phonecode,console.log(e.codeback),Object(a.j)(t.data.message),!e.isSend)return;e.isSend=!1;var o=60;e.codeInfo="("+o+"秒后重试)",e.timer=setInterval(function(){o--,e.codeInfo="("+o+"秒后重试)",0==o&&(clearInterval(e.timer),e.codeInfo="获取验证码",e.isSend=!0)},1e3)}else Object(a.j)("验证码发送失败,请重试"),clearInterval(e.timer),e.codeInfo="获取验证码",e.isSend=!0}):"获取验证码"!=this.codeInfo?Object(a.j)("验证码发送频繁,请稍后再试"):Object(a.j)("请输入正确格式的手机号!")},toChange:function(){var e=this;this.codeback==this.code?n.a.test(this.mobile)&&Object(c.b)("/account/edit-phone",{accessToken:this.accessToken,cellphone:this.mobile,code:this.code}).then(function(t){console.log(t),Object(a.j)(t.data.message),t.data.data.cellphone?(e.$cookie.set("cellphone",t.data.data.cellphone,{expires:"1Y"}),Object(i.e)("activeNum",3),e.$router.go(-2)):(clearInterval(e.timer),e.codeInfo="获取验证码",e.isSend=!0)}):Object(a.j)("验证码错误!")}}},l={render:function(){var e=this,t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"xgMobilewrap"},[n("div",{staticClass:"xgMobile"},[n("div",{staticClass:"mobile"},[n("span",[t._v("手机号")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"number",placeholder:"输入手机号"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"saf_wrap"},[n("div",{staticClass:"safe_info"},[t._v("校验码")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"number",placeholder:"短信验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),n("div",{class:{getCode:!0,sendCode:!t.isSend},on:{click:function(e){t.getCode()}}},[t._v(t._s(t.codeInfo))])])]),t._v(" "),n("van-button",{attrs:{type:"default btn_cz"},on:{click:function(e){t.toChange()}}},[t._v("确认")]),t._v(" "),n("div",{staticClass:"bottom_pass"},[n("span",{staticClass:"iconfont icon-shangyiye",on:{click:function(){e.$router.go(-1)}}}),t._v(" "),n("span",{staticClass:"iconfont icon-xiayiye",class:t.activeNum>=3?"":"disabled",on:{click:function(){t.activeNum>=3&&e.$router.go(1)}}})])],1)},staticRenderFns:[]};var d=o("C7Lr")(s,l,!1,function(e){o("qhj7")},"data-v-0158afa7",null);t.default=d.exports},qhj7:function(e,t){}});
//# sourceMappingURL=44.ce8e26f4e80187799c55.js.map