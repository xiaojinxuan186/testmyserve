{"version":3,"sources":["webpack:///src/components/jf_charge.vue","webpack:///./src/components/jf_charge.vue?3fd9","webpack:///./src/components/jf_charge.vue"],"names":["jf_charge","name","data","query","this","$route","show","id","money","list","wxConfig","created","_this","Object","api","url","encodeURIComponent","code","then","res","signpackage","methods","submitCharge","_this2","formData","FormData","append","$cookie","get","utils","payConfig","wx","config","debug","appId","timestamp","nonceStr","signature","jsApiList","ready","readyData","chooseWXPay","info","package","signType","paySign","success","$router","go","fail","Toast","order_id","console","log","complete","cancel","trigger","choose","item","index","components_jf_charge","render","_vm","_h","$createElement","_c","_self","staticClass","_l","key","class","on","click","$event","_v","_s","attrs","to","path","tag","type","href","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/24.b68f7b9b0a1f539890fe.js","sourcesContent":["<template>\r\n    <div class=\"jf_charge\">\r\n      <ul class=\"jf_content\">\r\n        <li v-for=\"(item, index) in list\" :class=\"index==id ? 'chiose' : ''\" :key=\"index\" @click=\"choose(item, index)\">{{item}}元</li>\r\n        <router-link :to=\"{path:'/jfChongzhi',query:{'code':query.code}}\" tag=\"li\">\r\n            其他金额\r\n        </router-link>\r\n      </ul>\r\n      <div class=\"beizhu\">注:1元=10积分</div>\r\n      <van-button type=\"default btn_yue\" @click=\"submitCharge\">充值</van-button>\r\n      <a href=\"\" class=\"kefu iconfont icon-kefu\"></a>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { apiGet, apiPost } from '../common/js/api';\r\nimport { initWxConfig, isweixin } from \"@/assets/utils\"\r\n    export default {\r\n      name: \"jf_charge\",\r\n      data() {\r\n        const query = this.$route.query;\r\n        return {\r\n          query:query,\r\n          show: false,\r\n          id: 0,\r\n          money:1000,\r\n          list: [1000, 500, 200, 100, 50, 20, 10],\r\n          wxConfig:{}\r\n        }\r\n      },\r\n      created(){\r\n        // initWxConfig(['chooseWXPay'])\r\n        apiGet(\"/index/sign-package\",{\r\n          url:encodeURIComponent(`http://anfum.demo.sclonsee.com/jfCharge?code=${this.query.code}`)\r\n        }).then(res=>{\r\n          this.wxConfig = res.data.data.signpackage;\r\n        })\r\n      },\r\n      methods: {\r\n        //提交充值\r\n        submitCharge(){\r\n          //生成本地订单\r\n          let formData = new FormData()\r\n          formData.append(\"accessToken\",this.$cookie.get('accessToken'))\r\n          formData.append(\"code\",this.query.code)\r\n          formData.append(\"price\",this.money)\r\n          formData.append(\"integral\",this.money*10)\r\n          apiPost(\"/integral/wchat-pay\",formData).then(res=>{\r\n            if(!isweixin()){\r\n              Toast(\"请在微信浏览器中打开！\")\r\n              return;\r\n            }\r\n            const { wxConfig } = this;\r\n            const payConfig = res.data.data;\r\n            wx.config({\r\n              debug: false, // 开启调试模式,开发时可以开启\r\n              appId: wxConfig.appId,   // 必填，公众号的唯一标识   由接口返回\r\n              // appId: 'wx2820819e12abc908',   // 必填，公众号的唯一标识   由接口返回\r\n              timestamp: wxConfig.timestamp, // 必填，生成签名的时间戳 由接口返回\r\n              nonceStr: wxConfig.nonceStr,    // 必填，生成签名的随机串 由接口返回\r\n              signature: wxConfig.signature,   // 必填，签名 由接口返回\r\n              jsApiList: [\"chooseWXPay\"] // 此处填你所用到的方法 \r\n            });\r\n            wx.ready(function(readyData){\r\n              wx.chooseWXPay({\r\n                timestamp: payConfig.info.timestamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n                nonceStr: payConfig.info.nonceStr, // 支付签名随机串，不长于 32 位\r\n                package: payConfig.info.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）\r\n                signType: payConfig.info.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n                paySign: payConfig.info.paySign, // 支付签名\r\n                success: function (res) {\r\n                    // 支付成功后的回调函数\r\n                    this.$router.go(-1)\r\n                },\r\n                fail: function(res) {\r\n                    Toast(\"支付失败\")\r\n                    //接口调用失败时执行的回调函数。\r\n                    let formData = new FormData()\r\n                    formData.append(\"accessToken\",this.$cookie.get('accessToken'))\r\n                    formData.append(\"order_id\",payConfig.order_id)\r\n                    apiPost(\"/integral/pay-failure\",formData).then(res=>{\r\n                      console.log(res)\r\n                    })\r\n                    \r\n                },\r\n                complete: function(res) {\r\n                    //接口调用完成时执行的回调函数，无论成功或失败都会执行。\r\n                },\r\n                cancel: function(res) {\r\n                    //用户点击取消时的回调函数，仅部分有用户取消操作的api才会用到。\r\n                    Toast(\"支付取消\")\r\n                },\r\n                trigger: function(res) {\r\n                    //监听Menu中的按钮点击时触发的方法，该方法仅支持Menu中的相关接口。\r\n                }\r\n              })\r\n            })\r\n            \r\n          })\r\n        },\r\n        choose(item, index) {\r\n          this.id = index;\r\n          this.money=item;\r\n          console.log(this.money)\r\n        }\r\n      }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .jf_charge{\r\n    background: #E6E9ED;\r\n    width: 100%;\r\n    height: 100%;\r\n    font-size: 0.17rem;\r\n    padding-top: 0.18rem;\r\n    .jf_content{\r\n      background: white;\r\n      width: 3.5rem;\r\n      padding-bottom: 0.15rem;\r\n      margin: 0 auto;\r\n      flex-wrap: wrap;\r\n      display: flex;\r\n      li{\r\n        height:.5rem;\r\n        margin-top: 0.13rem;\r\n        text-align: center;\r\n        width: 30%;\r\n        line-height: .5rem;\r\n        box-sizing: border-box;\r\n        margin-left:0.1rem ;\r\n        background:rgba(229,232,235,.5);\r\n        border-radius:0.04rem;\r\n        color: #333;\r\n        button{\r\n          background:rgba(229,232,235,.5);\r\n          height: 100%;\r\n          width: 100%;\r\n        }\r\n      }\r\n      .chiose{\r\n        border: 1px solid #3C7FEE;\r\n      }\r\n    }\r\n    .beizhu{\r\n      font-size: 0.15rem;\r\n      width: 100%;\r\n      text-align: right;\r\n      color: #9a9a9a;\r\n      padding: 0.16rem;\r\n    }\r\n    .btn_yue{\r\n      width: 100%;\r\n      height:0.47rem;\r\n      font-size: 0.19rem;\r\n      color: white;position: fixed;\r\n      bottom: 0;\r\n      background:linear-gradient(-90deg,rgba(60,127,238,1),rgba(103,154,237,1));\r\n    }\r\n    .kefu{\r\n      width: 0.52rem;\r\n      height: 0.52rem;\r\n      background:linear-gradient(-90deg,rgba(70,133,238,1),rgba(155,193,255,1));\r\n      border-radius:50%;\r\n      box-shadow:0px 5px 10px 0px rgba(60,127,238,0.42);\r\n      position: fixed;\r\n      bottom: 1.5rem;\r\n      display: block;\r\n      text-align: center;\r\n      line-height: 0.52rem;\r\n      font-size: 0.28rem;\r\n      color: white;\r\n      right: 0.11rem;\r\n    }\r\n    .sum_pan{\r\n      width: 100%;\r\n      overflow: hidden;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/jf_charge.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"jf_charge\"},[_c('ul',{staticClass:\"jf_content\"},[_vm._l((_vm.list),function(item,index){return _c('li',{key:index,class:index==_vm.id ? 'chiose' : '',on:{\"click\":function($event){_vm.choose(item, index)}}},[_vm._v(_vm._s(item)+\"元\")])}),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":{path:'/jfChongzhi',query:{'code':_vm.query.code}},\"tag\":\"li\"}},[_vm._v(\"\\n        其他金额\\n    \")])],2),_vm._v(\" \"),_c('div',{staticClass:\"beizhu\"},[_vm._v(\"注:1元=10积分\")]),_vm._v(\" \"),_c('van-button',{attrs:{\"type\":\"default btn_yue\"},on:{\"click\":_vm.submitCharge}},[_vm._v(\"充值\")]),_vm._v(\" \"),_c('a',{staticClass:\"kefu iconfont icon-kefu\",attrs:{\"href\":\"\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-9fc76a84\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/jf_charge.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9fc76a84\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./jf_charge.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./jf_charge.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./jf_charge.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9fc76a84\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./jf_charge.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9fc76a84\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/jf_charge.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}