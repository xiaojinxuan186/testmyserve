webpackJsonp([39],{b2P1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("4YfN"),i=s.n(a),o=s("g3lQ"),n={name:"jf_mingxi",components:{MyLoadMore:s("ZC1k").a},data:function(){return{show:!1,lowDate:!1,isLoad:!0,searchInfo:{sort:"",type:"",page:1,size:10},type_list:[{typeName:"首佣",status:7},{typeName:"续佣",status:6},{typeName:"增员奖",status:5},{typeName:"管理奖",status:4},{typeName:"充值",status:3},{typeName:"兑换",status:8}],popupVisible:!1,scorelist:[],resData:{}}},created:function(){var t=this;this.getScoreList(),Object(o.a)("/index/sign-package",{url:encodeURIComponent("http://anfum.demo.sclonsee.com/jfMingxi")}).then(function(e){var s=e.data.data.signpackage;t.resData=s,wx.config({debug:!0,appId:s.appId,timestamp:s.timestamp,nonceStr:s.nonceStr,signature:s.signature,jsApiList:["onMenuShareAppMessage"]})})},methods:{getScoreList:function(){var t=this;console.log(this.searchInfo),Object(o.a)("/integral/integral-list",i()({},this.searchInfo,{accessToken:this.$cookie.get("accessToken")})).then(function(e){console.log(e),t.scorelist=e.data.data.data})},toRecharge:function(){var t=this.resData;alert("https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t.appId+"&redirect_uri=http://anfuapi.demo.sclonsee.com/v1/index/get-code&response_type=code&scope=snsapi_base#wechat_redirect"),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t.appId+"&redirect_uri=http%3A%2F%2Fanfum.demo.sclonsee.com%2FjfCharge&response_type=code&scope=snsapi_base#wechat_redirect"},loadmore:function(){var t=this;this.$set(this.searchInfo,"page",++this.searchInfo.page),Object(o.a)("/integral/integral-list",i()({},this.searchInfo,{accessToken:this.$cookie.get("accessToken")})).then(function(e){200===e.status&&(t.scorelist=t.scorelist.concat(e.data.data.data),e.data.data.data.length<10?t.isLoad=!1:t.isLoad=!0)})},changedt:function(){this.searchInfo.page=1,this.isLoad=!0;var t=this.searchInfo.sort;this.$set(this.searchInfo,"sort",1===t?2:1),this.getScoreList()},changemn:function(){this.searchInfo.page=1,this.isLoad=!0;var t=this.searchInfo.sort;this.$set(this.searchInfo,"sort",3===t?4:3),this.getScoreList()},resetSearch:function(){this.searchInfo.page=1,this.isLoad=!0,this.popupVisible=!1,this.searchInfo={sort:"",page:1,size:10,type:""},this.getScoreList()},handleConfirmone:function(t){console.log(t),this.$set(this.searchInfo,"min_ymd",t.toLocaleDateString().replace(/\//g,"-")),this.getScoreList()},handleConfirmtwo:function(t){console.log(t),this.$set(this.searchInfo,"max_ymd",t.toLocaleDateString().replace(/\//g,"-")),this.getScoreList()},toDetail:function(t){this.$router.push({path:"/jfDetail",query:{scoreId:t}})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wdShouyi"},[s("ul",{staticClass:"tab_list"},[s("li",{on:{click:function(e){t.changedt()}}},[s("i",{class:1===t.searchInfo.sort||2===t.searchInfo.sort?"active":""},[t._v("时间")]),t._v(" "),s("div",[s("span",{staticClass:"iconfont icon-shangsanjiao",class:1===t.searchInfo.sort?"active":""}),t._v(" "),s("span",{staticClass:"iconfont icon-xiasanjiao",class:2===t.searchInfo.sort?"active":""})])]),t._v(" "),s("li",{on:{click:function(e){t.changemn()}}},[s("i",{class:3===t.searchInfo.sort||4===t.searchInfo.sort?"active":""},[t._v("金额")]),t._v(" "),s("div",[s("span",{staticClass:"iconfont icon-shangsanjiao",class:4===t.searchInfo.sort?"active":""}),t._v(" "),s("span",{staticClass:"iconfont  icon-xiasanjiao",class:3===t.searchInfo.sort?"active":""})])]),t._v(" "),s("li",{class:5===t.searchInfo.sort?"active":"",on:{click:function(e){t.popupVisible=!0}}},[s("i",[t._v("筛选")])])]),t._v(" "),s("MyLoadMore",{attrs:{list:t.scorelist,isLoad:t.isLoad},on:{"is-loadmore":t.loadmore}},[s("ul",{staticClass:"jf_list"},t._l(t.scorelist,function(e,a){return s("li",{key:a,on:{click:function(s){t.toDetail(e.id)}}},[s("div",{staticClass:"jf_detail"},[s("div",{staticClass:"jfd_good"},[t._v("\n          "+t._s(e.title)+"\n        ")]),t._v(" "),s("div",{staticClass:"jfd_num jfd_zhuchu",style:{color:"1"===e.data_type?"#CC1C1C":"#3C7FEE"}},[t._v("\n          "+t._s("1"===e.data_type?"+":"-")+t._s(e.points)+"\n        ")])]),t._v(" "),s("div",{staticClass:"jf_data"},[s("div",{staticClass:"jfd_year"},[t._v(t._s(e.created_at))])])])}))]),t._v(" "),s("van-button",{attrs:{type:"default invate"},on:{click:t.toRecharge}},[t._v("充值")]),t._v(" "),s("mt-popup",{attrs:{position:"right"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("div",{staticClass:"po_warp"},[s("form",{on:{submit:function(e){e.preventDefault(),t.popupVisible=!1,t.searchInfo.sort=5,t.getScoreList()}}},[s("div",{staticClass:"bottom_type"},[s("van-button",{attrs:{type:"default"},on:{click:function(e){return e.preventDefault(),t.resetSearch(e)}}},[t._v("重置")]),t._v(" "),s("van-button",{attrs:{type:"default","native-type":"submit"}},[t._v("确认")])],1),t._v(" "),s("div",{staticClass:"info"},[t._v("时间")]),t._v(" "),s("div",{staticClass:"time_area"},[s("div",{staticClass:"low_time",on:{click:function(e){t.$refs.pickerone.open()}}},[t._v(t._s(t.searchInfo.min_ymd)),s("i",{staticClass:"iconfont icon-rili"})]),t._v(" "),s("span"),t._v(" "),s("div",{staticClass:"high_time",on:{click:function(e){t.$refs.pickertwo.open()}}},[t._v(t._s(t.searchInfo.max_ymd)),s("i",{staticClass:"iconfont icon-rili"})])]),t._v(" "),s("div",{staticClass:"info"},[t._v("金额区间")]),t._v(" "),s("div",{staticClass:"money_area"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInfo.min_points,expression:"searchInfo.min_points"}],attrs:{type:"number",min:"0",placeholder:"最低金额"},domProps:{value:t.searchInfo.min_points},on:{input:function(e){e.target.composing||t.$set(t.searchInfo,"min_points",e.target.value)}}}),t._v(" "),s("span"),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInfo.max_points,expression:"searchInfo.max_points"}],attrs:{type:"number",min:t.searchInfo.min_points,placeholder:"最高金额"},domProps:{value:t.searchInfo.max_points},on:{input:function(e){e.target.composing||t.$set(t.searchInfo,"max_points",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"info"},[t._v("类别")]),t._v(" "),s("div",[s("ul",{staticClass:"type_list"},t._l(t.type_list,function(e,a){return s("li",{key:a,style:{color:t.searchInfo.type===e.status?"#3C7FEE":""},on:{click:function(){t.$set(t.searchInfo,"type",e.status)}}},[t._v("\n              "+t._s(e.typeName)+"\n            ")])}))])])])]),t._v(" "),s("a",{staticClass:"kefu iconfont icon-kefu",attrs:{href:""}}),t._v(" "),s("mt-datetime-picker",{ref:"pickerone",attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日",startDate:new Date("2000/1/1"),endDate:new Date},on:{confirm:t.handleConfirmone}}),t._v(" "),s("mt-datetime-picker",{ref:"pickertwo",attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日",startDate:new Date(t.searchInfo.min_ymd),endDate:new Date},on:{confirm:t.handleConfirmtwo}})],1)},staticRenderFns:[]};var r=s("C7Lr")(n,c,!1,function(t){s("pVaQ")},"data-v-267ef8e8",null);e.default=r.exports},pVaQ:function(t,e){}});
//# sourceMappingURL=39.7689a75d233af697ba8e.js.map